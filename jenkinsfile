pipeline {
    agent any  // This will use the available agent (Windows in your case)

    tools {
        maven 'Maven 3.9.9  // Replace this with your Maven version
    }

    environment {
        JAVA_HOME = 'C:\Program Files\Java\jdk-21'  // Make sure the JAVA_HOME path is correct for your system
        MAVEN_HOME = 'C:\Users\SOWMIYA\Downloads\apache-maven-3.9.9-bin.zip\apache-maven-3.9.9'  // Adjust Maven path
    }

    stages {
        stage('Checkout SCM') {
            steps {
                // Checkout the code from SCM (Git, etc.)
                checkout scm
            }
        }

        stage('Build') {
            steps {
                // Run Maven clean install on Windows using bat instead of sh
                bat 'mvn clean install'
            }
        }

        stage('Test') {
            steps {
                // Running tests (if applicable)
                bat 'mvn test'  // Or other test commands depending on your project
            }
        }

        // Optionally add other stages for deployment, packaging, etc.
    }

    post {
        always {
            echo 'This will always run after the pipeline, regardless of success/failure.'
        }
        success {
            echo 'This will run if the pipeline completes successfully.'
        }
        failure {
            echo 'This will run if the pipeline fails.'
        }
    }
}
